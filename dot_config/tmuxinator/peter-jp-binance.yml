name: live-peter-jp-binance
root: /lab/paper/ts/lean

startup_window: "1"
startup_pane: 1

windows:
  - Live:
      layout: main-horizontal
      panes:
        - strat:
            - conda activate paper
            - docker pull quantconnect/lean
            - current_time=$(TZ="Asia/Singapore" date +"%Y-%m-%d %H:%M:%S") && echo "Current Time - $current_time"
            - echo '\t---------- CMD to launch live strategy ----------\n\n\tcd /lab/paper/ts/lean && lean live deploy live/crypto.peter-jp-binance.margin --brokerage Binance --data-provider-live Binance --binance-exchange-name Binance --binance-use-testnet live --data-provider-historical local --lean-config "/lab/paper/ts/lean/lean.crypto.peter-jp-binance.margin.json"'
            - cd /lab/paper/ts/lean && lean live deploy live/crypto.peter-jp-binance.margin --brokerage Binance --data-provider-live Binance --binance-exchange-name Binance --binance-use-testnet live --data-provider-historical local --lean-config "/lab/paper/ts/lean/lean.crypto.peter-jp-binance.margin.json"

        - cron:
            - cd /lab/lib/ts/cronlab
            - ipython
            - run cron.crypto.peter-jp-binance.margin.py
